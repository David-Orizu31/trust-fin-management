<!doctype html>
<html lang="en">
    <head>
        <title>Trust Financial Management Coorperative Society - Loan</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

        <!-- Favicon -->
        <link rel="shortcut icon" href="img/trustfin-logo-transparent.png" type="image/x-icon">
        <!-- Bootstrap CSS v5.2.1 -->
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
        <!-- Custom CSS -->
        <link rel="stylesheet" href="css/styles.css">
        <link rel="stylesheet" href="css/responsive.css">
        <!-- Slick Carousel CSS -->
        <link rel="stylesheet" href="slick-1.8.1/slick-1.8.1/slick/slick.css">
        <link rel="stylesheet" href="slick-1.8.1/slick-1.8.1/slick/slick-theme.css">
        <!-- Icofont CSS -->
        <link rel="stylesheet" href="icofont/icofont.min.css">
        <!-- AOS CSS -->
        <link rel="stylesheet" href="aos/aos.css">
        <!-- Font Awesome JS -->
        <script src="js/font-awesome.js"></script>
        <!-- Line Awesome CSS -->
        <link rel="stylesheet" href="line-awesome/css/line-awesome.css">
        <link rel="stylesheet" href="line-awesome/css/line-awesome.min.css">
        <!-- Animate CSS -->
        <link rel="stylesheet" href="css/animate.css">
        <!-- FancyBox CSS -->
        <link rel="stylesheet" href="fancybox-master/fancybox-master/dist/jquery.fancybox.min.css">
        <!-- Unicons Icon -->
        <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
        <!-- Login CSS -->
        <link rel="stylesheet" href="css/application.css">
        <!-- Select2 CSS -->
        <link rel="stylesheet" href="css/select2.min.css">
    </head>

    <body>

        <div class="se-pre-con">
            <div id="loader"></div>
            <div class="loader-img">
                <img src="img/trustfin-logo-transparent.png" alt="TFMCS Logo" style="width: 100%; padding: 25px 10px;">
            </div>
        </div>

        <main class="app-bg">

        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-9 col-md-12">
                   <div class="app-overlay">
                      <div class="app-form-area">

                        <div class="text-center pb-3">
                            <a href="index.html">
                                <img src="img/trustfin-logo-transparent.png" alt="Logo" width="120px" class="img-logo">
                            </a>
                            <h5 class="font-600 pt-2">Membership Loan Form</h5>
                            <p class="font-12 text-purple mb-0">Kindly complete the loan application form accurately. Ensure all required fields are filled and supporting documents are uploaded where necessary. This information will be used to assess your eligibility and process your loan request as quickly as possible.</p>
                        </div>

                        <div id="formAlert" class="alert alert-danger" style="display:none;">
                            <strong>Please fill the following required fields:</strong>
                            <ul id="missingFieldsList"></ul>
                        </div>

                        <form action="" class="auth-form" id="loanform" method="post" enctype="multipart/form-data">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="avatar" class="form-label">Photo</label>
                                        <br>
                                        <div id="my_camera" class="camera-container"></div>
                                        <input type="button" value="Take Snapshot" class="my-2 btn btn-primary" onClick="take_snapshot()">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-label d-md-block d-none" style="visibility: hidden;">Your captured image</label>
                                        <input type="hidden" name="avatar" class="image-tag" required>
                                        <div id="results" class="camera-container">
                                            Your captured image will appear here...
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="account_type_id" class="form-label">Choose Account Type</label>
                                        <select name="account_type_id" id="account_type_id" class="form-select select-control" required>
                                            <option value="1" data-value="Personal">Personal</option>
                                            <option value="2" data-value="Corporate">Corporate</option>
                                            <option value="3" data-value="Joint">Joint</option>
                                        </select>
                                    </div>
                                </div>
                                <!-- <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="avatar" class="form-label">Account Holder's Photo</label>
                                        <input type="file" name="avatar" id="avatar" class="form-control" accept="image/*" required>
                                    </div>
                                </div> -->
                                <div class="col-md-4 optional-section" id="titlediv">
                                    <div class="form-group">
                                        <label for="title" class="form-label">Title(s):</label>
                                        <input type="text" name="title" id="title" class="form-control" placeholder="Eg. Mr., Mr. & Mrs.">
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <label for="surname" class="form-label">Surname:</label>
                                        <input type="text" name="surname" id="surname" class="form-control" placeholder="Surname" required>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="fname">
                                    <div class="form-group">
                                        <label for="first_name" class="form-label">First Name(s):</label>
                                        <input type="text" name="first_name" id="first_name" class="form-control" placeholder="First Name(s)">
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="othname">
                                    <div class="form-group">
                                        <label for="other_name" class="form-label">Other Name(s):</label>
                                        <input type="text" name="other_name" id="other_name" class="form-control" placeholder="Other Name(s)">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="email" class="form-label">Email Address:</label>
                                        <input type="email" name="email" id="email" class="form-control" placeholder="Email Address" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="phone" class="form-label">Phone Number:</label>
                                        <input type="tel" name="phone" id="phone" class="form-control" placeholder="Phone Number" required>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="maritaldiv">
                                    <div class="form-group">
                                        <label for="marital_status" class="form-label">Marital Status:</label>
                                        <select name="marital_status" id="marital_status" class="form-select select-control">
                                            <option value="Single">Single</option>
                                            <option value="Married">Married</option>
                                            <option value="Divorced">Divorced</option>
                                            <option value="Widowed">Widowed</option>
                                            <option value="Seperated">Seperated</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="gender" class="form-label">Gender:</label>
                                        <select name="gender" id="gender" class="form-select select-control" required>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="dob" class="form-label">Date of Birth:</label>
                                        <input type="date" name="dob" id="dob" class="form-control" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="employ_status" class="form-label">Employment Status:</label>
                                        <select name="employ_status" id="employ_status" class="form-select select-control" required>
                                            <option value="">-- Select --</option>
                                            <option value="Unemployed">Unemployed</option>
                                            <option value="Employed">Employed</option>
                                            <option value="Self Employed">Self Employed</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="studentdiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="student" class="form-label">Are you a Student?</label>
                                        <select name="student" id="student" class="form-select select-control" style="width: 100%;">
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="employclass" style="display: none;">
                                    <div class="form-group">
                                        <label for="employ_class" class="form-label">Employer (Government Ministry/Agency)</label>
                                        <select name="employ_class" id="employ_class" class="form-select select-control" style="width: 100%;">
                                            <option value="">-- Select --</option>
                                            <option value="Ministry">Ministry</option>
                                            <option value="Agency">Agency</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="ministrydiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="ministry" class="form-label">Choose Ministry</label>
                                        <select name="ministry" id="ministry" class="form-select select-control" style="width: 100%;">
                                            <option value="">-- Select --</option>
                                            <option value="Federal Ministry of Budget and Economic Planning">Federal Ministry of Budget and Economic Planning</option>
                                            <option value="Federal Ministry of Humanitarian Affairs and Poverty Alleviation">Federal Ministry of Humanitarian Affairs and Poverty Alleviation</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="sectordiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="sector" class="form-label">Agency Sector</label>
                                        <select name="sector" id="sector" class="form-select select-control" style="width: 100%;">
                                            <option value="">-- Select --</option>
                                            <option value="Economy & Finance">Economy & Finance</option>
                                            <option value="Communications & Information Technology">Communications & Information Technology</option>
                                            <option value="Aviation & Transportation">Aviation & Transportation</option>
                                            <option value="Oil, Gas & Energy">Oil, Gas & Energy</option>
                                            <option value="Environment & Agriculture">Environment & Agriculture</option>
                                            <option value="Health & Social Services">Health & Social Services</option>
                                            <option value="Justice, Regulation & Oversight">Justice, Regulation & Oversight</option>
                                            <option value="Science, Research & Culture">Science, Research & Culture</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="agencydiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="agency" class="form-label">Agency Name</label>
                                        <select name="agency" id="agency" class="form-select select-control" style="width: 100%;">
                                            <option value="">-- Select --</option>
                                            <option value="Agency 1">Agency 1</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="proofemploydiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="employment_proof" class="form-label">Proof of Employment & Income</label>
                                        <select name="employment_proof" id="employment_proof" class="form-select select-control" style="width: 100%;">
                                            <option value="">-- Select --</option>
                                            <option value="IPPIS">IPPIS number</option>
                                            <option value="IPPIS">Pay Slip</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="ippisdiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="ippis" class="form-label">IPPIS Number</label>
                                        <input type="text" name="ippis" id="ippis" class="form-control" placeholder="Enter IPPIS Number">
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="payslipdiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="pay_slip" class="form-label">Pay Slip</label>
                                        <input type="file" name="pay_slip" id="pay_slip" class="form-control" accept=".pdf,.doc,.docx,image/*">
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="selfemploydiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="self_employ_category" class="form-label">Occupation Type</label>
                                        <select name="self_employ_category" id="self_employ_category" class="form-select select-control" style="width: 100%;">
                                            <option value="">-- Select --</option>
                                            <option value="Artisan">Artisan</option>
                                            <option value="Business Owner">Business Owner</option>
                                            <option value="Entrepreneur">Entrepreneur</option>
                                            <option value="Professional">Professional</option>
                                            <option value="Farmer">Farmer</option>
                                            <option value="Trader/Vendor">Trader/Vendor</option>
                                            <option value="Freelancer">Freelancer</option>
                                            <option value="Contractor">Contractor</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="otherdiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="other" class="form-label">State Occupation Type</label>
                                        <input type="text" name="other" id="other" class="form-control" placeholder="Enter Occupation Type">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="occupation" class="form-label">Occupation</label>
                                        <input type="text" name="occupation" id="occupation" class="form-control" placeholder="Enter Occupation" required>
                                    </div>
                                </div>
                                <div class="col-md-6 optional-section" id="homeadddiv">
                                    <div class="form-group">
                                        <label for="home_address" class="form-label">Home Address</label>
                                        <textarea name="home_address" id="home_address" class="form-control" rows="3" placeholder="Enter Home Address"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="business_address" class="form-label">Business Address</label>
                                        <textarea name="business_address" id="business_address" class="form-control" rows="3" placeholder="Enter Business Address"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="loan_amount" class="form-label">Amount Applied For (₦)</label>
                                        <input type="text" name="loan_amount" id="loan_amount" class="form-control" placeholder="Enter Loan Amount" onkeyup="this.value = this.value.replace(/[^0-9]/g,'');" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="loan_purpose" class="form-label">Purpose of the Loan</label>
                                        <textarea name="loan_purpose" id="loan_purpose" class="form-control" rows="3" placeholder="Enter Loan Purpose" required></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="loan_type" class="form-label">Loan Type</label>
                                        <select name="loan_type" id="loan_type" class="form-select select-control" required>
                                            <option value="Soft or Instant">Soft Loan / Instant Loan (Max. of 3 months)</option>
                                            <option value="Group">Group Loan (Max. of 7 months)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="loan_duration" class="form-label">Loan Duration</label>
                                        <select name="loan_duration" id="loan_duration" class="form-select select-control" required>
                                            <option value="1 month">1 month</option>
                                            <option value="2 months">2 months</option>
                                            <option value="3 months">3 months</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="payment_form" class="form-label">Payment Option (Form of Payment)</label>
                                        <select name="payment_form" id="payment_form" class="form-select select-control" required>
                                            <option value="Weekly">Weekly</option>
                                            <option value="Monthly">Monthly</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="payment_source" class="form-label">Source of Payment</label>
                                        <select name="payment_source" id="payment_source" class="form-select select-control" required>
                                            <option value="Business">Business</option>
                                            <option value="Salary">Salary</option>
                                            <option value="Rent">Rent</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="account_number" class="form-label">Account Number</label>
                                        <input type="text" name="account_number" id="account_number" class="form-control" placeholder="Enter Account Number" onkeyup="this.value = this.value.replace(/[^0-9]/g,'');" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="bank_name" class="form-label">Bank Name</label>
                                        <input type="text" name="bank_name" id="bank_name" class="form-control" placeholder="Enter Bank Name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="bvn" class="form-label">Bank Verification Number</label>
                                        <input type="text" name="bvn" id="bvn" class="form-control" placeholder="Enter your BVN" required>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <h6 class="text-blue mt-3 font-600">List of Collateral Securities:</h6>
                                    <small class="font-13"><strong class="text-danger">Note:</strong> List out Household equipments or landed properties you have in possession. The value of these equipments or properties must be twice your loan application amount.</small>

                                    <div class="table-responsive mt-2">
                                        <table class="table table-bordered font-14">
                                            <thead>
                                                <tr>
                                                    <th style="width: 10px;">No.</th>
                                                    <th>Collateral</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="result-table-body">
                                                <tr>
                                                    <td style="width: 10px;">1</td>
                                                    <td class="form-group">
                                                        <input type="text" name="collateral[]" class="form-control" placeholder="Enter Collateral" style="min-width: 170px;" required>
                                                    </td>
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                   <button class="btn btn-success btn-sm" type="button" onclick="addRow()"><span class="fa fa-plus"></span> Add Collateral</button>

                                </div>

                                <div class="col-md-6 optional-section" id="certdiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="certificate" class="form-label">Certificate of Incorporation</label>
                                        <input type="file" class="form-control" name="certificate" id="certificate" accept=".pdf,.jpg,.jpeg,.png">
                                        <strong class="font-11 text-danger">Max. Size - 2MB (Accepted formats: pdf, jpg, jpeg, png)</strong>
                                    </div>
                                </div>

                                <div class="col-md-6 optional-section" id="regnodiv" style="display: none;">
                                    <div class="form-group">
                                        <label for="reg_no" class="form-label">Company Reg No.</label>
                                        <input type="text" name="reg_no" id="reg_no" class="form-control" placeholder="Eg. RC:100003">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="signature" class="form-label">Your Signature</label>
                                        <input type="file" name="signature" id="signature" class="form-control" required>
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="form-group">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="agree" id="agree"/>
                                            <label class="form-check-label" for="terms" style="font-size: 14px;"> I acknowledge that I have read, understood, and agree to be bound by the <a href="terms.html" class="text-primary" target="_blank">Terms & Conditions</a> of Trust Financial Management Cooperative Society.</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12 mt-3">
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-blue rounded-0">Submit Application</button>
                                    </div>
                                </div>
                            </div>
                        </form>

                      </div>
                   </div>
                </div>
            </div>
        </div>

<style>
.camera-container {
    width: 100%;
    max-width: 220px;
    aspect-ratio: 4/3; /* maintains 4:3 ratio on all devices */
    background: #000;
    overflow: hidden;
    border-radius: 8px;
}
.camera-container video, 
.camera-container img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* fills without stretching */
}

#results.camera-container {
    width: 100%;
    max-width: 220px;
    aspect-ratio: 4/3;
    border: 1px dashed #aaa;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: whitesmoke;
    font-size: 14px;
    text-align: center;
    overflow: hidden;
}
#results.camera-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
</style>
        

        </main>

        <button onclick="topFunction()" id="myBtn" title="Go to top"><i class="la la-angle-up" aria-hidden="true"></i></button>

        <!-- Bootstrap JavaScript Libraries -->
        <script src="bootstrap/js/popper.min.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
        <!-- Jquery 3.5.1 -->
        <script src="js/jquery-2.1.3.min.js"></script>
        <!-- Jquery Counter Up -->
        <script src="js/jquery-ui.min.js"></script>
        <script src="js/waypoints.min.js"></script>
        <script src="js/jquery.counterup.min.js"></script>
        <script>
            $('.counter').counterUp({
            delay: 10,
            time: 3000
            });
        </script>
        <!-- WOW JS -->
        <script src="js/wow.js"></script>
        <script>
            wow = new WOW(
            {
                boxClass:     'wow',      // default
                animateClass: 'animated', // default
                offset:       0,          // default
                mobile:       true,       // default
                live:         true        // default
            }
            )
            wow.init();
        </script>
        <!-- FancyBox JS -->
        <script src="fancybox-master/fancybox-master/dist/jquery.fancybox.min.js"></script>
        <!-- Custom JS -->
        <script src="js/scripts.js"></script>

        <!-- AOS JS -->
        <script src="aos/aos.js"></script>
        <script>
            /**
            * Animation on scroll function and init
            */
            function aos_init() {
                AOS.init({
                duration: 1000,
                easing: 'ease-in-out',
                once: true,
                mirror: false
                });
            }
            window.addEventListener('load', () => {
                aos_init();
            });
        </script>

    <!-- Slick JS -->
    <script src="slick-js/jquery-migrate-1.2.1.min.js"></script>
    <!-- Slick Carousel JS -->
    <script src="slick-1.8.1/slick-1.8.1/slick/slick.min.js"></script>
    <script src="slick-1.8.1/slick-1.8.1/slick/slick-animation.min.js"></script>

    <!-- Preloader JS -->
    <script src="js/modernizr.js"></script>
    <script>
        $(window).load(function() {
            // Animate loader off screen
            $(".se-pre-con").fadeOut(700);
        });
    </script>
    <!-- Select2 Js -->
    <script src="js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
           $('.select-control').select2();
        });
    </script>
    <!-- Auth JS -->
    <script src="js/auth.js"></script>
    <!-- Webcam JS -->
    <script src="js/webcam.min.js"></script>
    <script>
        Webcam.set({
            width: 220,        // internal capture resolution
            height: 165,
            image_format: 'jpeg',
            jpeg_quality: 90   // ✅ lighter file, still sharp
        });

        Webcam.attach('#my_camera');

        function take_snapshot() {
            Webcam.snap(function(data_uri) {
                document.querySelector(".image-tag").value = data_uri;
                document.getElementById('results').innerHTML = '<img src="'+data_uri+'"/>';
            });
        }
    </script>
    <!-- Prevent Hidden Form fields from Submitting -->
    <script>
    $('#loanform').on('submit', function(e) {
        let hasEmptyRequired = false;
        let missingFields = [];

        // Always hide alert first
        $('#formAlert').hide();
        $('#missingFieldsList').empty();

        $('.optional-section').each(function() {
            const $section = $(this);

            if ($section.css('display') === 'none') {
                // Hidden → remove names
                $section.find('input, select, textarea').each(function() {
                    $(this).removeAttr('name');
                });
            } else {
                // Visible → check for empty fields
                $section.find('input, select, textarea').each(function() {
                    const $field = $(this);

                    // Restore name if missing
                    if (!$field.attr('name')) {
                        if ($field.attr('id')) {
                            $field.attr('name', $field.attr('id'));
                        }
                    }

                    // Check if empty
                    if (!$field.prop('disabled') && !$field.val().trim()) {
                        hasEmptyRequired = true;
                        missingFields.push($field.attr('id') || $field.attr('placeholder') || 'Unnamed field');
                    }
                });
            }
        });

        if (hasEmptyRequired) {
            e.preventDefault(); // stop submission

            // Append each missing field as a list item
            $.each(missingFields, function(index, field) {
                $('#missingFieldsList').append(`<li>${field}</li>`);
            });

            // Show the alert box
            $('#formAlert').show();
        }
    });

    // Dynamically Add Collaterals
    function addRow() {
        const tbody = document.getElementById("result-table-body");
        const totalRows = tbody.rows.length;

        const index = totalRows + 1;
        var newRow = `
            <tr>
                <td class="serial" style="width: 10px;">${index}</td>
                <td class="form-group">
                    <input type="text" name="collateral[]" class="form-control" placeholder="Enter Collateral" style="min-width: 170px;" required>
                </td>
                <td style="min-width: 20px;">
                    <button type="button" class="btn btn-danger btn-sm remove-result-row">
                        <span class="fa fa-trash-alt"></span>
                    </button>
                </td>
            </tr>`;
        $('#result-table-body').append(newRow);
        reindexRows(); // make sure indexes are always correct
    }

    // Remove Row
    $(document).on('click', '.remove-result-row', function() {
        $(this).closest('tr').remove();
        reindexRows(); // update serial numbers after removal
    });

    // Reindex function
    function reindexRows() {
        $('#result-table-body tr').each(function(index) {
            $(this).find('.serial').text(index + 1);
        });
    }

    // On Changing Fields Function
    $('#employ_status').change(function() {
        var studentdiv = $('#studentdiv');
        var employclass = $('#employclass');
        var ministrydiv = $('#ministrydiv');
        var sectordiv = $('#sectordiv');
        var agencydiv = $('#agencydiv');
        var proofemploydiv = $('#proofemploydiv');
        var ippisdiv = $('#ippisdiv');
        var payslipdiv = $('#payslipdiv');
        var selfemploydiv = $('#selfemploydiv');
        var otherdiv = $('#otherdiv');

        if ($(this).val() == 'Unemployed') {
            studentdiv.show();
            employclass.hide();
            ministrydiv.hide();
            sectordiv.hide();
            agencydiv.hide();
            proofemploydiv.hide();
            ippisdiv.hide();
            payslipdiv.hide();
            selfemploydiv.hide();
            otherdiv.hide();
        } else if ($(this).val() == 'Employed') {
            studentdiv.hide();
            employclass.show();
            ministrydiv.hide();
            sectordiv.hide();
            agencydiv.hide();
            proofemploydiv.show();
            ippisdiv.hide();
            payslipdiv.hide();
            selfemploydiv.hide();
            otherdiv.hide();
        } else if ($(this).val() == 'Self Employed') {
            studentdiv.hide();
            employclass.hide();
            ministrydiv.hide();
            sectordiv.hide();
            agencydiv.hide();
            proofemploydiv.hide();
            ippisdiv.hide();
            payslipdiv.hide();
            selfemploydiv.show();
            otherdiv.hide();
        } else {
            studentdiv.hide();
            employclass.hide();
            ministrydiv.hide();
            sectordiv.hide();
            agencydiv.hide();
            proofemploydiv.hide();
            ippisdiv.hide();
            payslipdiv.hide();
            selfemploydiv.hide();
            otherdiv.hide();
        }
    });

    $('#employ_class').change(function() {
       if ($(this).val() == 'Ministry') {
        $('#ministrydiv').show();
        $('#sectordiv').hide();
        $('#agencydiv').hide();
       } else if ($(this).val() == 'Agency') {
        $('#ministrydiv').hide();
        $('#sectordiv').show();
        $('#agencydiv').show();
       } else {
        $('#ministrydiv').hide();
        $('#sectordiv').hide();
        $('#agencydiv').hide();
       }
    });

    $('#self_employ_category').change(function() {
      if($(this).val() == 'Other') {
        $('#otherdiv').show();
      } else {
        $('#otherdiv').hide();
      }
    });

    $('#loan_type').change(function() {
      if ($(this).val() == 'Soft or Instant') {
        $('#loan_duration').html(`
            <option value="1 month">1 month</option>
            <option value="2 months">2 months</option>
            <option value="3 months">3 months</option>
        `);
      } else {
        $('#loan_duration').html(`
            <option value="1 month">1 month</option>
            <option value="2 months">2 months</option>
            <option value="3 months">3 months</option>
            <option value="4 months">4 months</option>
            <option value="5 months">5 months</option>
            <option value="6 months">6 months</option>
            <option value="7 months">7 months</option>
        `);
      }
    });

    $('#account_type_id').change(function() {
       var acctype = $('#account_type_id option:selected').data('value');
       if (acctype == 'Corporate') {
        $('label[for="surname"]').html('Company\'s Name:');
        $('#surname').attr("placeholder", "Company's Name");
        $('#fname').hide();
        $('#othname').hide();
        $('#titlediv').hide();
        $('#maritaldiv').hide();
        $('#homeadddiv').hide();
        $('#certdiv').show();
        $('#regnodiv').show();
        $('#business_address').prop('required', true);
       } else {
        $('label[for="surname"]').html('Surname:');
        $('#surname').attr("placeholder", "Surname");
        $('#fname').show();
        $('#othname').show();
        $('#titlediv').show();
        $('#maritaldiv').show();
        $('#homeadddiv').show();
        $('#certdiv').hide();
        $('#regnodiv').hide();
        $('#business_address').prop('required', false);
       }
    });
    </script>

    </body>
</html>